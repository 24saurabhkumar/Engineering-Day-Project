<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UniBridge - University Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #333;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 1000px;
            background-color: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        header {
            background: linear-gradient(to right, #6a11cb, #2575fc);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }

        .logo h1 {
            margin-left: 10px;
            font-size: 2rem;
        }

        .logo-icon {
            font-size: 2.5rem;
        }

        .user-info {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
        }

        .user-info i {
            margin-right: 8px;
        }

        .page {
            display: none;
            padding: 30px;
        }

        .active {
            display: block;
        }

        .role-selection {
            text-align: center;
        }

        .role-selection h2 {
            margin-bottom: 30px;
            color: #2575fc;
        }

        .role-cards {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 40px;
        }

        .role-card {
            width: 220px;
            padding: 25px 20px;
            border-radius: 12px;
            background: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .role-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .role-card.student {
            border-top: 5px solid #6a11cb;
        }

        .role-card.teacher {
            border-top: 5px solid #2575fc;
        }

        .role-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .student .role-icon {
            color: #6a11cb;
        }

        .teacher .role-icon {
            color: #2575fc;
        }

        .role-card h3 {
            margin-bottom: 10px;
        }

        .role-card p {
            color: #666;
            font-size: 0.9rem;
        }

        .registration-prompt {
            text-align: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .registration-prompt p {
            margin-bottom: 15px;
            color: #666;
        }

        .btn {
            display: inline-block;
            padding: 12px 25px;
            background: linear-gradient(to right, #6a11cb, #2575fc);
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid #2575fc;
            color: #2575fc;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f1f1f1;
        }

        .back-btn {
            background: #f1f1f1;
            color: #333;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .back-btn i {
            margin-right: 5px;
        }

        .dashboard-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .card {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            border-radius: 10px;
            padding: 20px;
            color: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card h3 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .card h3 i {
            margin-right: 10px;
        }

        .card p {
            margin-bottom: 20px;
        }

        .card-btn {
            background-color: white;
            color: #333;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        .card-btn:hover {
            background-color: #f1f1f1;
        }

        .assignment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .assignment-item {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.3s;
        }

        .assignment-item:hover {
            transform: translateY(-3px);
        }

        .submitted {
            background-color: #e8f5e9;
            border-left: 5px solid #4caf50;
        }

        .not-submitted {
            background-color: #ffebee;
            border-left: 5px solid #f44336;
        }

        .chat-container {
            margin-top: 20px;
            border-top: 1px solid #f1f1f1;
            padding-top: 20px;
        }

        .chat-messages {
            height: 200px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            background-color: #f9f9f9;
        }

        .message {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 18px;
            max-width: 80%;
        }

        .message.user {
            background-color: #2575fc;
            color: white;
            margin-left: auto;
        }

        .message.bot {
            background-color: #e0e0e0;
            color: #333;
        }

        .chat-input {
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
        }

        .chat-input button {
            background: linear-gradient(to right, #6a11cb, #2575fc);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 10px 20px;
            cursor: pointer;
        }

        .login-form {
            max-width: 400px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .error-message {
            color: #f44336;
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }

        .success-message {
            background-color: #e8f5e9;
            color: #2e7d32;
            padding: 12px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }

        .form-footer {
            text-align: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .form-footer a {
            color: #2575fc;
            text-decoration: none;
        }

        .form-footer a:hover {
            text-decoration: underline;
        }

        .logout-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .logout-btn i {
            margin-right: 5px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .pdf-viewer {
            width: 100%;
            height: 400px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .assignment-info {
            margin-top: 15px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }

        /* Calendar Styles - FIXED */
        .calendar {
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            padding-right: 10px;
            color: black;
        }

        .calendar-day {
            text-align: center;
            font-weight: bold;
            padding: 10px 0;
            color: #2575fc;
        }

        .calendar-date {
            text-align: center;
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s;
            min-height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .calendar-date.empty {
            visibility: hidden;
        }

        .calendar-date:hover {
            background-color: #f0f0f0;
        }

        .calendar-date.has-event {
            background-color: #ffeb3b;
            color: #333;
            font-weight: bold;
            position: relative;
        }

        .calendar-date.has-event:hover::after {
            content: attr(data-event);
            position: absolute;
            background: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            z-index: 10;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            width: 140px;
            white-space: normal;
        }

        /* Notice Board Styles */
        .notice-board {
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            max-height: 300px;
            overflow-y: auto;
        }

        .notice-item {
            padding: 10px;
            border-left: 4px solid #2575fc;
            background-color: #f9f9f9;
            margin-bottom: 10px;
            border-radius: 4px;
        }

        .notice-item h4 {
            margin-bottom: 5px;
            color: #2575fc;
        }

        .notice-item p {
            color: #666;
            font-size: 0.9rem;
        }

        .notice-date {
            font-size: 0.8rem;
            color: #999;
            text-align: right;
        }

        @media (max-width: 768px) {
            .role-cards {
                flex-direction: column;
                align-items: center;
            }

            .dashboard-content {
                grid-template-columns: 1fr;
            }

            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .user-info {
                position: relative;
                top: 0;
                right: 0;
                justify-content: center;
                margin-top: 15px;
            }

            .calendar-grid {
                gap: 3px;
            }

            .calendar-date {
                padding: 5px;
                font-size: 0.8rem;
                min-height: 30px;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <header>
        <div class="logo">
            <i class="fas fa-graduation-cap logo-icon"></i>
            <h1>UniBridge</h1>
        </div>
        <div class="user-info" id="header-user-info" style="display: none;">
            <i class="fas fa-user"></i>
            <span id="user-display-name">User Name</span>
        </div>
    </header>

    <!-- Role Selection Page -->
    <div class="page active" id="role-selection-page">
        <div class="role-selection">
            <h2>Select Your Role</h2>
            <div class="role-cards">
                <div class="role-card student" onclick="selectRole('student')">
                    <i class="fas fa-user-graduate role-icon"></i>
                    <h3>Student</h3>
                    <p>Access assignments, submit applications, and view upcoming events</p>
                </div>
                <div class="role-card teacher" onclick="selectRole('teacher')">
                    <i class="fas fa-chalkboard-teacher role-icon"></i>
                    <h3>Teacher</h3>
                    <p>Check assignments, manage student applications, and post updates</p>
                </div>
            </div>

            <div class="registration-prompt">
                <p>Haven't registered yet? First time user?</p>
                <button class="btn btn-outline" onclick="showRegistration()">Register Now</button>
            </div>
        </div>
    </div>

    <!-- Student Login Page -->
    <div class="page" id="student-login-page">
        <div class="dashboard-header">
            <button class="back-btn" onclick="goBackToRoleSelection()">
                <i class="fas fa-arrow-left" aria-hidden="true"></i> Back
            </button>
            <h2><i class="fas fa-user-graduate" aria-hidden="true"></i> Student Login</h2>
        </div>

        <div class="success-message" id="student-registration-success">
            Registration successful! Please login with your credentials.
        </div>

        <div class="login-form">
            <div class="form-group">
                <label for="student-email">Email Address</label>
                <input type="email" id="student-email" class="form-control" placeholder="Enter your email">
                <div class="error-message" id="student-email-error">Please enter a valid email address</div>
            </div>

            <div class="form-group">
                <label for="student-password">Password</label>
                <input type="password" id="student-password" class="form-control" placeholder="Enter your password">
                <div class="error-message" id="student-password-error">Password is required</div>
            </div>

            <button class="btn" style="width: 100%" onclick="login('student')">Login</button>

            <div class="form-footer">
                <p>Don't have an account? <a href="#" onclick="showRegistration()">Register here</a></p>
            </div>
        </div>
    </div>

    <!-- Student Dashboard -->
    <div class="page" id="student-dashboard">
        <div class="dashboard-header">
            <button class="back-btn" onclick="goBackToRoleSelection()">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <h2><i class="fas fa-user-graduate"></i> Student Dashboard</h2>
            <button class="logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>

        <div class="dashboard-content">
            <div class="card">
                <h3><i class="fas fa-user-circle"></i> Student Information</h3>
                <div id="student-info">
                    <p><strong>Name:</strong> <span id="student-name">-</span></p>
                    <p><strong>Roll No:</strong> <span id="student-roll">-</span></p>
                    <p><strong>Semester:</strong> <span id="student-semester">-</span></p>
                    <p><strong>Section:</strong> <span id="student-section">-</span></p>
                </div>
            </div>

            <div class="card">
                <h3><i class="fas fa-tasks"></i> Assignment Submission</h3>
                <p>Submit your assignments online. Select your course and upload your file.</p>
                <div class="form-group">
                    <label for="assignment-file">Select File (PDF only)</label>
                    <input type="file" id="assignment-file" class="form-control" accept=".pdf">
                </div>
                <button class="card-btn" onclick="submitAssignment()">Submit Assignment</button>
            </div>

            <div class="card" style="background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);">
                <h3><i class="fas fa-file-alt"></i> Application Submission</h3>
                <p>Submit leave applications or other requests to your department.</p>
                <button class="card-btn" onclick="alert('Application submission form would open here')">Submit Application</button>
            </div>

            <div class="card" style="background: linear-gradient(135deg, #5ee7df 0%, #b490ca 100%);">
                <h3><i class="fas fa-calendar-alt"></i> Academic Calendar</h3>
                <div class="calendar">
                    <div class="calendar-header">
                        <button onclick="changeMonth(-1)"><i class="fas fa-chevron-left"></i></button>
                        <h4 id="calendar-month" >September 2023</h4>
                        <button onclick="changeMonth(1)"><i class="fas fa-chevron-right"></i></button>
                    </div>
                    <div class="calendar-grid">
                        <div class="calendar-day" style="font-size: 10px;">Sun</div>
                        <div class="calendar-day" style="font-size: 10px;">Mon</div>
                        <div class="calendar-day" style="font-size: 10px;">Tue</div>
                        <div class="calendar-day" style="font-size: 10px;">Wed</div>
                        <div class="calendar-day"style="font-size: 10px;">Thu</div>
                        <div class="calendar-day"style="font-size: 10px;">Fri</div>
                        <div class="calendar-day"style="font-size: 10px;">Sat</div>
                        <!-- Calendar dates will be inserted here by JavaScript -->
                    </div>
                </div>
            </div>

            <div class="card" style="background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%); color: #333;">
                <h3><i class="fas fa-robot"></i> Student Chatbot</h3>
                <p>Get answers to your placement related questions.</p>
                <div class="chat-container">
                    <div class="chat-messages" id="student-chat">
                        <div class="message bot">
                            Hello! I'm your placement assistant. How can I help you today?
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" id="student-input" placeholder="Ask about placements...">
                        <button onclick="sendMessage('student')"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>

            <div class="card" style="background: linear-gradient(135deg, #fad0c4 0%, #ffd1ff 100%); color: #333;">
                <h3><i class="fas fa-clipboard-list"></i> Notice Board</h3>
                <div class="notice-board">
                    <div class="notice-item">
                        <h4>Mid-Term Examinations</h4>
                        <p>Mid-term exams will commence from next week. Please check the schedule on the college website.</p>
                        <div class="notice-date">September 15, 2023</div>
                    </div>
                    <div class="notice-item">
                        <h4>Industry Workshop</h4>
                        <p>An industry workshop on Web Development is scheduled for next Friday. Register through your student portal.</p>
                        <div class="notice-date">September 12, 2023</div>
                    </div>
                    <div class="notice-item">
                        <h4>Library Hours Extended</h4>
                        <p>Library will remain open until 10 PM during examination period.</p>
                        <div class="notice-date">September 10, 2023</div>
                    </div>
                </div>
            </div>
            <div class="card" style="width: 937px;background: rgb(86, 94, 103);" >
        <h2 class="card-title">Student Resources</h2>
        
        <div class="resource-item item-1">
            <div class="icon-wrapper">
                <i class="fas fa-book"></i>
            </div>
            <div class="resource-content">
                <h3>Course Materials</h3>
                <p class="info-text">Access your textbooks, slides, and readings</p>
            </div>
        </div>
        
        <div class="resource-item item-2">
            <div class="icon-wrapper">
                <i class="fas fa-calendar-alt"></i>
            </div>
            <div class="resource-content">
                <h3>Class Schedule</h3>
                <p class="info-text">View your upcoming classes and deadlines</p>
            </div>
        </div>
        
        <div class="resource-item item-3">
            <div class="icon-wrapper">
                <i class="fas fa-chart-bar"></i>
            </div>
            <div class="resource-content">
                <h3>Grades & Progress</h3>
                <p class="info-text">Check your grades and academic progress</p>
            </div>
        </div>
        
        <div class="resource-item item-4">
            <div class="icon-wrapper">
                <i class="fas fa-comments"></i>
            </div>
            <div class="resource-content">
                <h3>Faculty Communication</h3>
                <p class="info-text">Connect with your instructors and advisors</p>
            </div>
        </div>
    </div>
        </div>
    </div>

    <!-- Teacher Login Page -->
    <div class="page" id="teacher-login-page">
        <div class="dashboard-header">
            <button class="back-btn" onclick="goBackToRoleSelection()">
                <i class="fas fa-arrow-left" aria-hidden="true"></i> Back
            </button>
            <h2><i class="fas fa-chalkboard-teacher" aria-hidden="true"></i> Teacher Login</h2>
        </div>

        <div class="success-message" id="teacher-registration-success">
            Registration successful! Please login with your credentials.
        </div>

        <div class="login-form">
            <div class="form-group">
                <label for="teacher-email">Email Address</label>
                <input type="email" id="teacher-email" class="form-control" placeholder="Enter your email">
                <div class="error-message" id="teacher-email-error">Please enter a valid email address</div>
            </div>

            <div class="form-group">
                <label for="teacher-password">Password</label>
                <input type="password" id="teacher-password" class="form-control" placeholder="Enter your password">
                <div class="error-message" id="teacher-password-error">Password is required</div>
            </div>

            <button class="btn" style="width: 100%" onclick="login('teacher')">Login</button>

            <div class="form-footer">
                <p>Don't have an account? <a href="#" onclick="showRegistration()">Register here</a></p>
            </div>
        </div>
    </div>

    <!-- Teacher Dashboard -->
    <div class="page" id="teacher-dashboard">
        <div class="dashboard-header">
            <button class="back-btn" onclick="goBackToRoleSelection()">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <h2><i class="fas fa-chalkboard-teacher"></i> Teacher Dashboard</h2>
            <button class="logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>

        <div class="dashboard-content">
            <div class="card">
                <h3><i class="fas fa-user-tie"></i> Teacher Information</h3>
                <div id="teacher-info">
                    <p><strong>Name:</strong> <span id="teacher-name">-</span></p>
                    <p><strong>Department:</strong> <span id="teacher-dept">-</span></p>
                    <p><strong>Email:</strong> <span id="teacher-email-display">-</span></p>
                </div>
            </div>

            <div class="card">
                <h3><i class="fas fa-check-circle"></i> Student Assignments</h3>
                <p>View and grade assignments submitted by students.</p>
                <div class="assignment-grid" id="assignment-status">
                    <!-- Assignment status will be dynamically populated -->
                </div>
            </div>

            <div class="card" style="background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);">
                <h3><i class="fas fa-bullhorn"></i> Teacher's Upcomings</h3>
                <p>Department meetings, events, and important notices.</p>
                <ul style="list-style-type: none; margin-top: 15px;">
                    <li style="padding: 8px; background: rgba(255,255,255,0.3); border-radius: 5px; margin-bottom: 10px;">
                        <strong>Faculty Meeting</strong> - Tomorrow 10:00 AM
                    </li>
                    <li style="padding: 8px; background: rgba(255,255,255,0.3); border-radius: 5px; margin-bottom: 10px;">
                        <strong>Mid-Term Exam Schedule</strong> - Next week
                    </li>
                    <li style="padding: 8px; background: rgba(255,255,255,0.3); border-radius: 5px; margin-bottom: 10px;">
                        <strong>Industry Workshop</strong> - Register by Friday
                    </li>
                </ul>
            </div>

            <div class="card" style="background: linear-gradient(135deg, #5ee7df 0%, #b490ca 100%);">
                <h3><i class="fas fa-chart-line"></i> Performance Analytics</h3>
                <p>View class performance and assignment statistics.</p>
                <button class="card-btn" style="margin-top: 15px;" onclick="alert('Analytics dashboard would open here')">View Analytics</button>
            </div>

            <div class="card" style="background: linear-gradient(135deg, #fad0c4 0%, #ffd1ff 100%); color: #333;">
                <h3><i class="fas fa-clipboard-list"></i> Notice Board</h3>
                <div class="notice-board">
                    <div class="notice-item">
                        <h4>Department Meeting</h4>
                        <p>Monthly department meeting scheduled for this Friday at 3 PM in Conference Hall A.</p>
                        <div class="notice-date">September 18, 2023</div>
                    </div>
                    <div class="notice-item">
                        <h4>Exam Paper Submission</h4>
                        <p>Last date for submission of mid-term question papers is approaching. Please submit by September 20.</p>
                        <div class="notice-date">September 14, 2023</div>
                    </div>
                    <div class="notice-item">
                        <h4>Research Grant Proposals</h4>
                        <p>Call for research grant proposals. Submit your proposals by October 5th.</p>
                        <div class="notice-date">September 10, 2023</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Registration Form -->
    <div class="page" id="registration-page">
        <div class="dashboard-header">
            <button class="back-btn" onclick="goBackToRoleSelection()">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <h2><i class="fas fa-user-plus"></i> New User Registration</h2>
        </div>

        <div style="max-width: 500px; margin: 0 auto;">
            <form id="registration-form">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Full Name</label>
                    <input type="text" id="reg-fullname" class="form-control" placeholder="Enter your full name" required>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Gender</label>
                    <select id="reg-gender" class="form-control" required>
                        <option value="">Select gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Email Address</label>
                    <input type="email" id="reg-email" class="form-control" placeholder="Enter your email" required>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Role</label>
                    <select id="reg-role" class="form-control" required onchange="toggleRoleFields()">
                        <option value="">Select your role</option>
                        <option value="student">Student</option>
                        <option value="teacher">Teacher</option>
                    </select>
                </div>

                <div id="student-fields" style="display: none; margin-bottom: 20px;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Roll Number</label>
                        <input type="text" id="reg-rollno" class="form-control" placeholder="Enter your roll number">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Semester</label>
                        <input type="text" id="reg-semester" class="form-control" placeholder="Enter your semester">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Section</label>
                        <input type="text" id="reg-section" class="form-control" placeholder="Enter your section">
                    </div>
                </div>

                <div id="teacher-fields" style="display: none; margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Department</label>
                    <input type="text" id="reg-department" class="form-control" placeholder="Enter your department">
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">ID Card Number</label>
                    <input type="text" id="reg-idcard" class="form-control" placeholder="Enter your ID card number" required>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Password</label>
                    <input type="password" id="reg-password" class="form-control" placeholder="Create a password" required>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Confirm Password</label>
                    <input type="password" id="reg-confirm-password" class="form-control" placeholder="Confirm your password" required>
                </div>

                <button type="button" class="btn" style="width: 100%;" onclick="registerUser()">Register</button>
            </form>
        </div>
    </div>
</div>

<!-- PDF Viewer Modal -->
<div class="modal" id="pdf-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modal-title">Assignment Submission</h3>
            <button class="close-btn" onclick="closeModal()">&times;</button>
        </div>
        <div id="modal-body">
            <iframe class="pdf-viewer" id="pdf-viewer" src="about:blank"></iframe>
        </div>
    </div>
</div>

<script>
    // Data storage using localStorage
    let users = JSON.parse(localStorage.getItem('users')) || [];
    let assignments = JSON.parse(localStorage.getItem('assignments')) || {};
    let currentUser = null;
    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();

    // Initialize default assignments if not exists
    function initializeAssignments() {
        if (Object.keys(assignments).length === 0) {
            // Create default assignment status for all student roll numbers
            users.forEach(user => {
                if (user.role === 'student' && user.rollno) {
                    assignments[user.rollno] = {
                        status: 'pending',
                        file: null
                    };
                }
            });
            localStorage.setItem('assignments', JSON.stringify(assignments));
        }
    }

    // Show the role selection page by default
    document.addEventListener('DOMContentLoaded', function() {
        showPage('role-selection-page');
        initializeAssignments();
        generateCalendar(currentMonth, currentYear);
    });

    function showPage(pageId) {
        // Hide all pages
        document.querySelectorAll('.page').forEach(page => {
            page.classList.remove('active');
        });

        // Show the selected page
        document.getElementById(pageId).classList.add('active');

        // Clear registration form when showing it
        if (pageId === 'registration-page') {
            clearRegistrationForm();
        }

        // Update assignment status when showing teacher dashboard
        if (pageId === 'teacher-dashboard') {
            updateAssignmentStatus();
        }

        // Update user info when showing dashboard
        if (pageId === 'student-dashboard' && currentUser) {
            updateStudentInfo();
        }

        if (pageId === 'teacher-dashboard' && currentUser) {
            updateTeacherInfo();
        }

        // Regenerate calendar when showing student dashboard
        if (pageId === 'student-dashboard') {
            generateCalendar(currentMonth, currentYear);
        }
    }

    function clearRegistrationForm() {
        document.getElementById('registration-form').reset();
        document.getElementById('student-fields').style.display = 'none';
        document.getElementById('teacher-fields').style.display = 'none';
    }

    function selectRole(role) {
        if (role === 'student') {
            showPage('student-login-page');
        } else if (role === 'teacher') {
            showPage('teacher-login-page');
        }
    }

    function goBackToRoleSelection() {
        showPage('role-selection-page');
    }

    function showRegistration() {
        showPage('registration-page');
    }

    function toggleRoleFields() {
        const role = document.getElementById('reg-role').value;
        document.getElementById('student-fields').style.display = role === 'student' ? 'block' : 'none';
        document.getElementById('teacher-fields').style.display = role === 'teacher' ? 'block' : 'none';
    }

    function login(role) {
        const email = document.getElementById(role + '-email').value;
        const password = document.getElementById(role + '-password').value;

        // Basic validation
        if (!validateEmail(email)) {
            document.getElementById(role + '-email-error').style.display = 'block';
            return;
        } else {
            document.getElementById(role + '-email-error').style.display = 'none';
        }

        if (!password) {
            document.getElementById(role + '-password-error').style.display = 'block';
            return;
        } else {
            document.getElementById(role + '-password-error').style.display = 'none';
        }

        // Check if user exists
        const user = users.find(u => u.email === email && u.password === password && u.role === role);

        if (user) {
            currentUser = user;
            // Show user info in header
            document.getElementById('header-user-info').style.display = 'flex';
            const title = user.gender === 'female' ? 'Ms. ' : (user.gender === 'male' ? 'Mr. ' : '');
            document.getElementById('user-display-name').textContent = title + user.fullName;

            if (role === 'student') {
                showPage('student-dashboard');
            } else {
                showPage('teacher-dashboard');
            }
        } else {
            alert('Invalid email or password. Please try again.');
        }
    }

    function updateStudentInfo() {
        if (currentUser) {
            document.getElementById('student-name').textContent = currentUser.fullName;
            document.getElementById('student-roll').textContent = currentUser.rollno || '-';
            document.getElementById('student-semester').textContent = currentUser.semester || '-';
            document.getElementById('student-section').textContent = currentUser.section || '-';
        }
    }

    function updateTeacherInfo() {
        if (currentUser) {
            const title = currentUser.gender === 'female' ? 'Ms. ' : (currentUser.gender === 'male' ? 'Mr. ' : '');
            document.getElementById('teacher-name').textContent = title + currentUser.fullName;
            document.getElementById('teacher-dept').textContent = currentUser.department || '-';
            document.getElementById('teacher-email-display').textContent = currentUser.email || '-';
        }
    }

    function registerUser() {
        const fullName = document.getElementById('reg-fullname').value;
        const gender = document.getElementById('reg-gender').value;
        const email = document.getElementById('reg-email').value;
        const role = document.getElementById('reg-role').value;
        const password = document.getElementById('reg-password').value;
        const confirmPassword = document.getElementById('reg-confirm-password').value;
        const idCard = document.getElementById('reg-idcard').value;

        // Additional fields based on role
        let rollno = '';
        let semester = '';
        let section = '';
        let department = '';

        if (role === 'student') {
            rollno = document.getElementById('reg-rollno').value;
            semester = document.getElementById('reg-semester').value;
            section = document.getElementById('reg-section').value;
        } else if (role === 'teacher') {
            department = document.getElementById('reg-department').value;
        }

        // Basic validation
        if (!fullName || !gender || !email || !role || !password || !confirmPassword || !idCard) {
            alert('Please fill all required fields');
            return;
        }

        if (password !== confirmPassword) {
            alert('Passwords do not match');
            return;
        }

        if (!validateEmail(email)) {
            alert('Please enter a valid email address');
            return;
        }

        // Check if user already exists
        if (users.some(user => user.email === email)) {
            alert('User with this email already exists');
            return;
        }

        // Create new user object
        const newUser = {
            fullName,
            gender,
            email,
            role,
            password,
            idCard,
            rollno,
            semester,
            section,
            department
        };

        // Add to users array
        users.push(newUser);
        localStorage.setItem('users', JSON.stringify(users));

        // If student, initialize assignment status
        if (role === 'student' && rollno) {
            assignments[rollno] = {
                status: 'pending',
                file: null
            };
            localStorage.setItem('assignments', JSON.stringify(assignments));
        }

        // Show success message and redirect to login
        alert('Registration successful! You can now login.');

        if (role === 'student') {
            document.getElementById('student-registration-success').style.display = 'block';
            showPage('student-login-page');
        } else {
            document.getElementById('teacher-registration-success').style.display = 'block';
            showPage('teacher-login-page');
        }
    }

    function validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
    }

    function submitAssignment() {
        if (!currentUser || currentUser.role !== 'student') {
            alert('Please login as a student to submit assignments');
            return;
        }

        const fileInput = document.getElementById('assignment-file');
        if (!fileInput.value) {
            alert('Please select a file to upload');
            return;
        }

        const file = fileInput.files[0];
        if (file.type !== 'application/pdf') {
            alert('Please upload a PDF file only');
            return;
        }

        // Read file as data URL
        const reader = new FileReader();
        reader.onload = function(e) {
            // Update assignment status and store file data
            assignments[currentUser.rollno] = {
                status: 'submitted',
                file: e.target.result,
                fileName: file.name,
                submittedAt: new Date().toLocaleString()
            };
            localStorage.setItem('assignments', JSON.stringify(assignments));

            alert('Assignment submitted successfully!');
            fileInput.value = ''; // Clear the file input
        };
        reader.readAsDataURL(file);
    }

    function updateAssignmentStatus() {
        const assignmentGrid = document.getElementById('assignment-status');
        assignmentGrid.innerHTML = '';

        // Get all students
        const students = users.filter(user => user.role === 'student');

        students.forEach(student => {
            const assignment = assignments[student.rollno] || { status: 'pending' };
            const status = assignment.status;

            const assignmentItem = document.createElement('div');
            assignmentItem.classList.add('assignment-item');
            assignmentItem.classList.add(status === 'submitted' ? 'submitted' : 'not-submitted');

            assignmentItem.innerHTML = `
                <h4>${student.rollno}</h4>
                <p>${student.fullName}</p>
                <p>${status === 'submitted' ? 'Submitted' : 'Pending'}</p>
            `;

            // Add click event to view assignment if submitted
            if (status === 'submitted') {
                assignmentItem.onclick = function() {
                    viewAssignment(student.rollno);
                };
            }

            assignmentGrid.appendChild(assignmentItem);
        });
    }

    function viewAssignment(rollno) {
        const assignment = assignments[rollno];
        if (assignment && assignment.file) {
            const modal = document.getElementById('pdf-modal');
            const pdfViewer = document.getElementById('pdf-viewer');
            const modalTitle = document.getElementById('modal-title');

            modalTitle.textContent = 'Assignment Submission - ' + rollno;
            pdfViewer.src = assignment.file;

            modal.style.display = 'flex';
        } else {
            alert('No assignment file found for this student.');
        }
    }

    function closeModal() {
        document.getElementById('pdf-modal').style.display = 'none';
        document.getElementById('pdf-viewer').src = 'about:blank';
    }

    function logout() {
        currentUser = null;
        document.getElementById('header-user-info').style.display = 'none';
        showPage('role-selection-page');
    }

    function sendMessage(role) {
        const inputField = document.getElementById(role + '-input');
        const message = inputField.value.trim();

        if (message === '') return;

        const chatContainer = document.getElementById(role + '-chat');

        // Add user message
        const userMessage = document.createElement('div');
        userMessage.classList.add('message', 'user');
        userMessage.textContent = message;
        chatContainer.appendChild(userMessage);

        // Clear input
        inputField.value = '';

        // Simulate bot response after a short delay
        setTimeout(() => {
            const botMessage = document.createElement('div');
            botMessage.classList.add('message', 'bot');

            // Simple response logic
            if (message.toLowerCase().includes('placement')) {
                botMessage.textContent = 'Placement sessions will begin next month. Make sure your resume is updated.';
            } else if (message.toLowerCase().includes('interview')) {
                botMessage.textContent = 'Mock interviews are scheduled for next week. Please register with the placement cell.';
            } else if (message.toLowerCase().includes('resume')) {
                botMessage.textContent = 'You can get your resume reviewed by the placement cell every Tuesday and Thursday.';
            } else {
                botMessage.textContent = 'I can help with placement related queries. Ask me about placements, interviews, or resumes.';
            }

            chatContainer.appendChild(botMessage);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }, 1000);
    }

    function generateCalendar(month, year) {
        const monthNames = ["January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
        ];

        document.getElementById('calendar-month').textContent = monthNames[month] + " " + year;

        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        const calendarGrid = document.querySelector('.calendar-grid');
        // Clear existing dates (keep day headers)
        const dayHeaders = calendarGrid.querySelectorAll('.calendar-day');
        calendarGrid.innerHTML = '';
        dayHeaders.forEach(day => calendarGrid.appendChild(day));

        // Fill empty cells for days before the first day of the month
        for (let i = 0; i < firstDay; i++) {
            const emptyCell = document.createElement('div');
            emptyCell.classList.add('calendar-date', 'empty');
            calendarGrid.appendChild(emptyCell);
        }

        // Create cells for each day of the month
        for (let i = 1; i <= daysInMonth; i++) {
            const dateCell = document.createElement('div');
            dateCell.classList.add('calendar-date');
            dateCell.textContent = i;

            // Add random events to some dates (only future dates)
            const today = new Date();
            const cellDate = new Date(year, month, i);
            if (cellDate > today && Math.random() > 0.7) {
                dateCell.classList.add('has-event');
                const events = [
                    "Web Tech Assignment Due",
                    "Maths Quiz",
                    "DBMS Project Submission",
                    "Soft Skills Presentation"
                ];
                const randomEvent = events[Math.floor(Math.random() * events.length)];
                dateCell.setAttribute('data-event', randomEvent);
            }

            calendarGrid.appendChild(dateCell);
        }
    }

    function changeMonth(direction) {
        currentMonth += direction;
        if (currentMonth < 0) {
            currentMonth = 11;
            currentYear--;
        } else if (currentMonth > 11) {
            currentMonth = 0;
            currentYear++;
        }
        generateCalendar(currentMonth, currentYear);
    }

    // Allow sending message with Enter key
    document.getElementById('student-input').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            sendMessage('student');
        }
    });

    // Close modal when clicking outside
    window.onclick = function(event) {
        const modal = document.getElementById('pdf-modal');
        if (event.target === modal) {
            closeModal();
        }
    };
</script>
</body>
</html>